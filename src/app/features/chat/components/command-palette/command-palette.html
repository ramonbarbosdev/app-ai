<!-- BACKDROP -->
<div

  *ngIf="isOpen"

  class="fixed inset-0 bg-black/40 backdrop-blur-sm flex items-start justify-center pt-32 z-50 animate-[fadeIn_.15s_ease]"

  (click)="handleClose()"

>

  <!-- MODAL -->
  <div

    (click)="$event.stopPropagation()"

    class="w-full max-w-lg bg-[#020617] border border-white/10 rounded-xl shadow-2xl overflow-hidden animate-[scaleIn_.15s_ease]"

  >

    <!-- INPUT -->
    <div class="border-b border-white/10 px-4 py-3">

      <input

        [ngModel]="search()"
        (ngModelChange)="search.set($event)"

        placeholder="Buscar conversas..."

        autofocus

        class="w-full bg-transparent outline-none text-white text-sm placeholder:text-white/40"

      />

    </div>

    <!-- RESULTS -->
    <div class="max-h-80 overflow-y-auto">

      <button

        *ngFor="let conversation of filtered()"

        (click)="handleSelect(conversation.id)"

        class="w-full text-left px-4 py-3 text-sm text-white/70 hover:text-white hover:bg-white/5 transition"

      >

        {{ conversation.title }}

      </button>

      <!-- Empty -->
      <div

        *ngIf="filtered().length === 0"

        class="px-4 py-6 text-sm text-white/40 text-center"

      >

        Nenhuma conversa encontrada

      </div>

    </div>

  </div>

</div>
